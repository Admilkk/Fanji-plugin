const _0x375ada=_0x4ef0;(function(_0x13fbbc,_0x50d17e){const _0x435f64=_0x4ef0,_0x42f199=_0x13fbbc();while(!![]){try{const _0x292166=parseInt(_0x435f64(0x190))/0x1*(parseInt(_0x435f64(0x1b2))/0x2)+-parseInt(_0x435f64(0x1bb))/0x3*(parseInt(_0x435f64(0x199))/0x4)+parseInt(_0x435f64(0x19c))/0x5*(parseInt(_0x435f64(0x1cc))/0x6)+-parseInt(_0x435f64(0x1a7))/0x7*(-parseInt(_0x435f64(0x1a1))/0x8)+-parseInt(_0x435f64(0x19a))/0x9*(-parseInt(_0x435f64(0x1a0))/0xa)+parseInt(_0x435f64(0x186))/0xb*(-parseInt(_0x435f64(0x19b))/0xc)+-parseInt(_0x435f64(0x1c8))/0xd;if(_0x292166===_0x50d17e)break;else _0x42f199['push'](_0x42f199['shift']());}catch(_0x1aedbf){_0x42f199['push'](_0x42f199['shift']());}}}(_0x402c,0x98e73));import _0x35b595 from'node-fetch';import _0x3881f9 from'fs';import _0xf2d244 from'path';import _0x49626b from'js-yaml';import _0x1285cb from'../lib/common/CM.js';import _0x441ce1 from'../lib/common/common.js';import{fileURLToPath}from'url';function _0x402c(){const _0x2ab5c5=['hasOwnProperty','json','writeFileSync','makeForwardMsg','11806925RoREUu','https://api.yunxiyuanyxy.xyz/lolicon/?type=text','from\x20Fanji-plugin','readFileSync','276dfJIDQ','join','开始了','urls','反击!!!!','ptst','user_id','164109gVuuGy','map','../resource/bs/','all','dump','你要的图片','utf8','load','../resource/ymzx.jpg','你的涩图来啦','123amtVVa','消息被风控！\x0a','image','msg','text','Error\x20in\x20zt\x20function:\x20','check','.jpg','&proxy=imgaz.pixiv.net','2285224NUYPhP','556542CUTzjt','84LBugLV','5765ftIRLJ','binary','API\x20返回的数据不正确，未能获取到图片信息。','pixiv','130tOlMZf','2391576uzfpIp','../resource/pixiv/','https://moe.jitsu.top/img','GET','涩图来啦','yxy','21RfmqTI','code','includes','出现了一点小问题','点击查看涩图','Error\x20in\x20yxy\x20function:\x20','_0.jpg','pics','你要的图来啦','push','error','16712HDdTzF','getTime','application/json','?sort=furry','https://moe.jitsui.top/img','message','length','r18','http://api.yujn.cn/api/baisi.php','6tfkPTV','buffer','match','被吞了，图链:','reply','from\x20反击插件','Agent','你要的涩图来啦','../config/config.yaml'];_0x402c=function(){return _0x2ab5c5;};return _0x402c();}import _0x19c75f from'https';import{dirname}from'path';const __filename=fileURLToPath(import.meta['url']),__dirname=dirname(__filename);let ymzx=_0xf2d244[_0x375ada(0x1cd)](__dirname,_0x375ada(0x18e)),apiurl=_0x375ada(0x1b6);const apiurl2='https://api.dujin.org/pic/yuanshen/',apiurl3=_0x375ada(0x1ba),apiurl4=_0x375ada(0x1c9),apiurl5='https://api.yunxiyuanyxy.xyz/freely/?type=json&num=',filepath=_0xf2d244[_0x375ada(0x1cd)](__dirname,_0x375ada(0x1c3)),configContent=_0x3881f9[_0x375ada(0x1cb)](filepath,'utf8');function _0x4ef0(_0xce5dc1,_0x341fc5){const _0x402cb9=_0x402c();return _0x4ef0=function(_0x4ef00c,_0x385df1){_0x4ef00c=_0x4ef00c-0x185;let _0x25aa22=_0x402cb9[_0x4ef00c];return _0x25aa22;},_0x4ef0(_0xce5dc1,_0x341fc5);}let config=_0x49626b[_0x375ada(0x18d)](configContent);if(!config[_0x375ada(0x1c4)]('pixiv')){config[_0x375ada(0x19f)]=![];const updatedConfigContent=_0x49626b['dump'](config);_0x3881f9[_0x375ada(0x1c6)](filepath,updatedConfigContent,_0x375ada(0x18c));}config[_0x375ada(0x19f)]===!![]&&(apiurl=_0x375ada(0x1a3));export class apisetu extends plugin{constructor(){const _0x4fad9c=_0x375ada;super({'name':'反击','dsc':_0x4fad9c(0x1d0),'event':_0x4fad9c(0x1b7),'priority':-0x6d79f82328ea3c000000000000000000000000000,'rule':[{'reg':/^#?随机(涩|色|瑟|塞|se)图$/i,'fnc':_0x4fad9c(0x1d1)},{'reg':/^#?随机(原|y|厵|○)(神|s|神|🈸)((图片)|图)?$/i,'fnc':'ys'},{'reg':/^#?(来(\d+)张)?随机(r18)(图)?(\u5c01\u53f7\u7248)?$/i,'fnc':_0x4fad9c(0x1b9)},{'reg':/^#?随机(兽耳|furry)(图)?$/i,'fnc':'fr'},{'reg':/^#?(随机)?(白丝|bs)(图)?$/i,'fnc':'bs'},{'reg':/^#?(来(\d+)张)?随机(云(溪|西|汐|夕)(院|圆|苑))(api)?(图)?$/i,'fnc':_0x4fad9c(0x1a6)},{'reg':/^#?(来(\d+)张)?随机杂(图)?$/i,'fnc':'zt'}]});}async['yxy'](_0x1bcdca){const _0x104f24=_0x375ada;await _0x1bcdca[_0x104f24(0x1bf)](_0x104f24(0x1ce));try{let _0x46df51=_0x1bcdca['msg'][_0x104f24(0x1bd)](/(\d+)/);_0x46df51=_0x46df51&&_0x46df51[0x1]?parseInt(_0x46df51[0x1],0xa):0x1;const _0x1f7587=[_0x104f24(0x1af)];let _0x427fe5,_0x3cbf2a=[];for(let _0xb4c63a=0x0;_0xb4c63a<_0x46df51;_0xb4c63a++){_0x427fe5=await _0x35b595(apiurl4);const _0x3f6b3b=await _0x427fe5[_0x104f24(0x194)]();_0x3f6b3b&&(_0x1f7587[_0x104f24(0x1b0)](segment['image'](_0x3f6b3b)),_0x3cbf2a[_0x104f24(0x1b0)](_0x3f6b3b));}const _0x2fc602=_0x441ce1['makeForwardMsg'](_0x1bcdca,_0x1f7587,_0x104f24(0x1ab));let _0x4a2bb5=await _0x1bcdca[_0x104f24(0x1bf)](_0x2fc602);if(!_0x4a2bb5&&_0x3cbf2a[_0x104f24(0x1b8)]>0x1){const _0xdfdc56=_0x3cbf2a[_0x104f24(0x1cd)]('\x0a');await _0x1bcdca['reply'](_0x104f24(0x191)+_0xdfdc56);}}catch(_0x1277ba){console[_0x104f24(0x1b1)](_0x104f24(0x1ac)+_0x1277ba[_0x104f24(0x1b7)]);}}async['zt'](_0x22258f){const _0x1eacb5=_0x375ada;await _0x22258f['reply'](_0x1eacb5(0x1ce));try{let _0x212fe2=_0x22258f[_0x1eacb5(0x193)][_0x1eacb5(0x1bd)](/(\d+)/);_0x212fe2=_0x212fe2&&_0x212fe2[0x1]?parseInt(_0x212fe2[0x1],0xa):0x1;const _0x5276c5=[_0x1eacb5(0x1af)];let _0x2bc507,_0x4ebb5d=[];_0x2bc507=await _0x35b595(''+apiurl5+_0x212fe2),_0x2bc507=await _0x2bc507[_0x1eacb5(0x1c5)]();if(_0x2bc507&&_0x2bc507[_0x1eacb5(0x1cf)]&&_0x2bc507[_0x1eacb5(0x1cf)][_0x1eacb5(0x1b8)]>0x0)for(let _0x5c5443=0x0;_0x5c5443<_0x2bc507[_0x1eacb5(0x1cf)]['length'];_0x5c5443++){const _0x22c650=_0x2bc507['urls'][_0x5c5443];_0x5276c5[_0x1eacb5(0x1b0)](segment[_0x1eacb5(0x192)](_0x22c650)),_0x4ebb5d[_0x1eacb5(0x1b0)](_0x22c650);}else return _0x22258f[_0x1eacb5(0x1bf)]('API\x20返回的数据不正确，未能获取到图片信息。');const _0x7de171=_0x441ce1['makeForwardMsg'](_0x22258f,_0x5276c5,_0x1eacb5(0x1ab));let _0x34bda3=await _0x22258f['reply'](_0x7de171);if(!_0x34bda3&&_0x4ebb5d[_0x1eacb5(0x1b8)]>0x1){const _0x5eee39=_0x4ebb5d[_0x1eacb5(0x1cd)]('\x0a');await _0x22258f['reply'](_0x1eacb5(0x191)+_0x5eee39);}}catch(_0x36005f){console['error'](_0x1eacb5(0x195)+_0x36005f[_0x1eacb5(0x1b7)]);}}async['bs'](_0x1cc25b){const _0x51e305=_0x375ada;try{const _0x350d05=await _0x35b595(apiurl3),_0xcce936=await _0x350d05[_0x51e305(0x1bc)](),_0x14d334=new Date()[_0x51e305(0x1b3)](),_0x2caf89=_0x14d334+'.jpg',_0x28b649=_0xf2d244[_0x51e305(0x1cd)](__dirname,_0x51e305(0x188)+_0x2caf89);_0x3881f9[_0x51e305(0x1c6)](_0x28b649,_0xcce936,'binary'),await _0x1cc25b['reply']([segment['image'](_0x28b649)]);}catch(_0x3bc52d){await _0x1cc25b[_0x51e305(0x1bf)]('出现了一点小问题，无法获取白丝图。'+_0x3bc52d[_0x51e305(0x1b7)]);}}async['ys'](_0x6a4299){const _0x5d6743=_0x375ada;await _0x6a4299[_0x5d6743(0x1bf)]([segment[_0x5d6743(0x192)](apiurl2)]);}async['ptst'](_0x30dc31){const _0x853ab6=_0x375ada;try{const _0x5bf807=[_0x853ab6(0x18b)];_0x5bf807[_0x853ab6(0x1b0)]([segment[_0x853ab6(0x192)](''+apiurl)]),_0x5bf807['push'](_0x853ab6(0x1ca));let _0x2974ff=await _0x441ce1[_0x853ab6(0x1c7)](_0x30dc31,_0x5bf807,_0x853ab6(0x1a5));await _0x30dc31[_0x853ab6(0x1bf)](_0x2974ff);return;}catch(_0x54ab40){await _0x30dc31['reply'](_0x853ab6(0x1aa)),await _0x30dc31['reply'](_0x54ab40[_0x853ab6(0x1b7)]);}}async['fr'](_0x343376){const _0x120817=_0x375ada;try{await _0x343376[_0x120817(0x1bf)]([segment[_0x120817(0x192)](apiurl+_0x120817(0x1b5))]);return;}catch(_0x6263f3){await _0x343376['reply'](_0x120817(0x1aa)),await _0x343376[_0x120817(0x1bf)](_0x6263f3[_0x120817(0x1b7)]);}}async[_0x375ada(0x1b9)](_0x83eff){const _0x4992d3=_0x375ada;try{const _0x23c400=_0x83eff[_0x4992d3(0x193)][_0x4992d3(0x1bd)](/^#?(来(\d+)张)?随机(r18)(图)?$/i),_0x55ca63=_0x23c400&&_0x23c400[0x2]?parseInt(_0x23c400[0x2]):0x1;if(_0x55ca63>0xa&!await _0x1285cb['check'](_0x83eff[_0x4992d3(0x185)])){await _0x83eff[_0x4992d3(0x1bf)]('最多10张！！');return;}const _0x44e834=_0x3881f9[_0x4992d3(0x1cb)](filepath,_0x4992d3(0x18c));let _0x2a2296=_0x49626b[_0x4992d3(0x18d)](_0x44e834);if(!_0x2a2296[_0x4992d3(0x1c4)](_0x4992d3(0x19f))){_0x2a2296[_0x4992d3(0x19f)]=![];const _0x1f08e8=_0x49626b[_0x4992d3(0x18a)](_0x2a2296);_0x3881f9[_0x4992d3(0x1c6)](filepath,_0x1f08e8,_0x4992d3(0x18c));}const _0x4ed071=_0x2a2296[_0x4992d3(0x19f)];let _0x544138=_0x4ed071?_0x4992d3(0x198):'';const _0x25941a={'method':_0x4992d3(0x1a4),'headers':{'Content-Type':_0x4992d3(0x1b4)},'agent':new _0x19c75f[(_0x4992d3(0x1c1))]({'rejectUnauthorized':![]})};let _0x158e62=await _0x35b595(apiurl+'?sort=r18&type=json&num='+_0x55ca63);_0x158e62=await _0x158e62['json']();if(_0x158e62[_0x4992d3(0x1a8)]===0xc8&&_0x158e62['pics']&&_0x158e62[_0x4992d3(0x1ae)]['length']>0x0){if(_0x158e62['pics'][_0x4992d3(0x1b8)]===0x1){const _0x1261ef=_0x158e62['pics'][0x0],_0x485d07=await _0x35b595(_0x1261ef,_0x25941a),_0x440b59=await _0x485d07[_0x4992d3(0x1bc)](),_0x1a9b9f=new Date()[_0x4992d3(0x1b3)](),_0x2fcd41=_0xf2d244['join'](__dirname,'../resource/pixiv/'+_0x1a9b9f+_0x4992d3(0x1ad));_0x3881f9[_0x4992d3(0x1c6)](_0x2fcd41,_0x440b59,_0x4992d3(0x19d));const _0x44ff0c=await _0x441ce1['makeForwardMsg'](_0x83eff,[segment[_0x4992d3(0x192)](_0x2fcd41),'\x0afrom\x20fanji-plugin',segment[_0x4992d3(0x192)](ymzx)],_0x4992d3(0x1c2));if(_0x83eff[_0x4992d3(0x193)][_0x4992d3(0x1a9)]('封号版')&&_0x1285cb[_0x4992d3(0x196)](_0x83eff[_0x4992d3(0x185)]))await _0x83eff[_0x4992d3(0x1bf)]([segment['image'](_0x2fcd41)]);else{let _0x33ac03=await this['reply'](_0x44ff0c);if(_0x33ac03)return;else{_0x33ac03=await this['reply'](_0x44ff0c);if(_0x33ac03)return;else await this['reply']([_0x4992d3(0x1be)+_0x158e62[_0x4992d3(0x1ae)]]);}}}else{const _0x941147=_0x158e62[_0x4992d3(0x1ae)][_0x4992d3(0x187)](async(_0x30eccc,_0x4f732c)=>{const _0x5227f1=_0x4992d3,_0x968390=await _0x35b595(_0x30eccc,_0x25941a),_0x24f5a8=await _0x968390[_0x5227f1(0x1bc)](),_0x23dfd9=new Date()[_0x5227f1(0x1b3)](),_0xadc48b=_0xf2d244['join'](__dirname,_0x5227f1(0x1a2)+_0x23dfd9+'_'+_0x4f732c+_0x5227f1(0x197));return _0x3881f9['writeFileSync'](_0xadc48b,_0x24f5a8,_0x5227f1(0x19d)),_0xadc48b;}),_0x2eb437=await Promise[_0x4992d3(0x189)](_0x941147),_0x2a3adf=[_0x4992d3(0x18f)];_0x2a3adf['push'](segment['image'](ymzx)),_0x2a3adf[_0x4992d3(0x1b0)](..._0x2eb437[_0x4992d3(0x187)](_0x1fbbb7=>segment['image'](_0x1fbbb7))),_0x2a3adf[_0x4992d3(0x1b0)](_0x4992d3(0x1c0));const _0x5d19a6=_0x2a3adf,_0x13effe=await _0x441ce1[_0x4992d3(0x1c7)](_0x83eff,_0x5d19a6,_0x4992d3(0x1c2));let _0x1c5cfd=await this[_0x4992d3(0x1bf)](_0x13effe);if(_0x1c5cfd)return;else{const _0x1c7039=_0x158e62[_0x4992d3(0x1ae)]['join']('\x0a\x0a');await this[_0x4992d3(0x1bf)](['被吞了，图链:\x0a'+_0x1c7039]);}}}else await _0x83eff['reply'](_0x4992d3(0x19e));}catch(_0x2610a8){await _0x83eff[_0x4992d3(0x1bf)](_0x4992d3(0x1aa)),await _0x83eff[_0x4992d3(0x1bf)](_0x2610a8[_0x4992d3(0x1b7)]);}}}